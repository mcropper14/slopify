<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkibidiIDE - No Cap FR FR ğŸ’€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1e1e1e;
            color: #d4d4d4;
            overflow: hidden;
            height: 100vh;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        .title-bar {
            background: linear-gradient(90deg, #ff6b9d, #c06dff, #6bcfff);
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid #ff00ff;
        }
        
        .title {
            font-size: 18px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .vibe-check {
            font-size: 12px;
            color: #fff;
            opacity: 0.9;
        }
        
        .toolbar {
            background: #2d2d30;
            padding: 8px;
            display: flex;
            gap: 4px;
            border-bottom: 1px solid #3e3e42;
            flex-wrap: wrap;
        }
        
        button {
            background: #3c3c3c;
            border: 1px solid #555;
            color: #ccc;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 13px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.2s;
        }
        
        button:hover {
            background: #505050;
            border-color: #777;
        }
        
        button:active {
            background: #2a2a2a;
        }
        
        .brainrot-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-weight: bold;
        }
        
        .brainrot-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background: #252526;
            border-right: 1px solid #3e3e42;
            overflow-y: auto;
            padding: 10px;
        }
        
        .file-tree {
            list-style: none;
        }
        
        .file-item {
            padding: 6px 8px;
            cursor: pointer;
            border-radius: 3px;
            margin: 2px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .file-item:hover {
            background: #2a2d2e;
        }
        
        .file-item.active {
            background: #37373d;
        }
        
        .editor-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .tabs {
            background: #2d2d30;
            display: flex;
            border-bottom: 1px solid #3e3e42;
            overflow-x: auto;
        }
        
        .tab {
            padding: 10px 16px;
            background: #2d2d30;
            border-right: 1px solid #3e3e42;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 120px;
        }
        
        .tab.active {
            background: #1e1e1e;
        }
        
        .tab:hover {
            background: #353535;
        }
        
        .tab-close {
            margin-left: auto;
            opacity: 0.6;
        }
        
        .tab-close:hover {
            opacity: 1;
        }
        
        .editor-wrapper {
            flex: 1;
            display: flex;
            position: relative;
            overflow: hidden;
        }
        
        .line-numbers {
            background: #1e1e1e;
            color: #858585;
            padding: 16px 8px;
            text-align: right;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.6;
            user-select: none;
            border-right: 1px solid #3e3e42;
            overflow: hidden;
            white-space: pre;
        }
        
        #editor {
            flex: 1;
            background: #1e1e1e;
            color: #d4d4d4;
            border: none;
            padding: 16px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
            overflow-y: auto;
            tab-size: 4;
        }
        
        .status-bar {
            background: #007acc;
            padding: 4px 12px;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: white;
        }
        
        .status-item {
            padding: 0 8px;
        }
        
        .brainrot-panel {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: rgba(30, 30, 30, 0.95);
            border: 2px solid #ff00ff;
            border-radius: 8px;
            padding: 16px;
            max-width: 300px;
            box-shadow: 0 4px 20px rgba(255, 0, 255, 0.3);
            display: none;
            z-index: 1000;
        }
        
        .brainrot-panel.show {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .brainrot-title {
            color: #ff00ff;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .brainrot-text {
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 12px;
        }
        
        .achievement {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: none;
            z-index: 2000;
            animation: achievementPop 0.5s ease;
        }
        
        @keyframes achievementPop {
            0% {
                transform: translateY(-100px) scale(0.5);
                opacity: 0;
            }
            50% {
                transform: translateY(10px) scale(1.1);
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
        
        .minimap {
            width: 100px;
            background: #252526;
            border-left: 1px solid #3e3e42;
            overflow: hidden;
            position: relative;
        }
        
        .minimap-content {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 2px;
            line-height: 1.2;
            color: #858585;
            padding: 4px;
            word-break: break-all;
        }

        .autocomplete {
            position: absolute;
            background: #2d2d30;
            border: 1px solid #3e3e42;
            border-radius: 4px;
            display: none;
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .autocomplete-item {
            padding: 6px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .autocomplete-item:hover,
        .autocomplete-item.selected {
            background: #094771;
        }

        .autocomplete-icon {
            width: 16px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title-bar">
            <div class="title">ğŸ’€ SkibidiIDE - Sigma Grindset Edition ğŸ”¥</div>
            <div class="vibe-check">Rizz Level: Ohio ğŸ“</div>
        </div>
        
        <div class="toolbar">
            <button onclick="newFile()">ğŸ“„ New</button>
            <button onclick="openFile()">ğŸ“ Open</button>
            <button onclick="saveFile()">ğŸ’¾ Save</button>
            <button onclick="undo()">â†¶ Undo</button>
            <button onclick="redo()">â†· Redo</button>
            <button onclick="find()">ğŸ” Find</button>
            <button onclick="runCode()">â–¶ï¸ Run</button>
            <button class="brainrot-btn" onclick="toggleBrainrot()">ğŸ§  Brainrot Mode</button>
            <button onclick="formatCode()">âœ¨ Format</button>
            <button onclick="toggleFloatingSpotify()" style="background: linear-gradient(135deg, #1db954 0%, #1ed760 100%); border: none; color: white; font-weight: bold;">
                ğŸµ Music Player
            </button>
            <button onclick="toggleAIAgents()" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%); border: none; color: white; font-weight: bold;">
                ğŸ¤– AI Agents
            </button>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <h3 style="padding: 8px; color: #ccc;">ğŸ“‚ EXPLORER (Real)</h3>
                <ul class="file-tree">
                    <li class="file-item active" onclick="switchFile('main.js')">
                        ğŸ“œ main.js
                    </li>
                    <li class="file-item" onclick="switchFile('styles.css')">
                        ğŸ¨ styles.css
                    </li>
                    <li class="file-item" onclick="switchFile('index.html')">
                        ğŸŒ index.html
                    </li>
                    <li class="file-item" onclick="switchFile('README.md')">
                        ğŸ“ README.md
                    </li>
                </ul>
                <div style="margin-top: 20px; padding: 8px; border-top: 1px solid #3e3e42;">
                    <h4 style="color: #ff00ff; margin-bottom: 8px;">ğŸ® Stats</h4>
                    <div style="font-size: 12px;">
                        <div>Lines: <span id="lineCount">0</span></div>
                        <div>Gyatt Meter: <span id="gyattMeter">0</span>%</div>
                        <div>Sigma Points: <span id="sigmaPoints">0</span></div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 8px; border-top: 1px solid #3e3e42;">
                    <h4 style="color: #ff00ff; margin-bottom: 8px;">ğŸ“± Brain Rot Break</h4>
                    
                    <!-- Platform Tabs -->
                    <div style="display: flex; gap: 4px; margin-bottom: 8px; flex-wrap: wrap;">
                        <button class="platform-tab active" onclick="switchPlatform('youtube')" data-platform="youtube" 
                                style="flex: 1; padding: 4px; font-size: 11px; background: #094771; border: 1px solid #0e639c; min-width: 45px;">
                            ğŸ“º YT
                        </button>
                        <button class="platform-tab" onclick="switchPlatform('instagram')" data-platform="instagram"
                                style="flex: 1; padding: 4px; font-size: 11px; background: #3c3c3c; border: 1px solid #555; min-width: 45px;">
                            ğŸ“· IG
                        </button>
                        <button class="platform-tab" onclick="switchPlatform('tenor')" data-platform="tenor"
                                style="flex: 1; padding: 4px; font-size: 11px; background: #3c3c3c; border: 1px solid #555; min-width: 45px;">
                            ğŸ­ GIF
                        </button>
                        <button class="platform-tab" onclick="switchPlatform('reddit')" data-platform="reddit"
                                style="flex: 1; padding: 4px; font-size: 11px; background: #3c3c3c; border: 1px solid #555; min-width: 45px;">
                            ğŸ”´ Reddit
                        </button>
                        <button class="platform-tab" onclick="switchPlatform('twitch')" data-platform="twitch"
                                style="flex: 1; padding: 4px; font-size: 11px; background: #3c3c3c; border: 1px solid #555; min-width: 45px;">
                            ğŸ® Twitch
                        </button>
                    </div>
                    
                    <!-- YouTube Panel -->
                    <div id="youtubePanel" class="platform-panel">
                        <input type="text" id="shortsUrl" placeholder="Paste YouTube Shorts URL" 
                               style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-bottom: 6px;">
                        <button onclick="embedShorts()" style="width: 100%; margin-bottom: 8px;">
                            ğŸ¬ Load Short
                        </button>
                        <button onclick="loadRandomShort()" style="width: 100%; margin-bottom: 8px; background: linear-gradient(135deg, #ff0050 0%, #ff9a00 100%); border: none; color: white;">
                            ğŸ² Random
                        </button>
                        <div id="shortsContainer" style="display: none; margin-top: 8px;">
                            <div style="position: relative; padding-bottom: 177.78%; height: 0; overflow: hidden;">
                                <iframe id="shortsPlayer" 
                                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 4px;"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                        allowfullscreen>
                                </iframe>
                            </div>
                            <button onclick="closeEmbed('youtube')" style="width: 100%; margin-top: 8px; background: #f44336;">
                                âŒ Close
                            </button>
                        </div>
                    </div>
                    
                    <!-- Instagram Panel -->
                    <div id="instagramPanel" class="platform-panel" style="display: none;">
                        <input type="text" id="reelsUrl" placeholder="Paste Instagram Reel URL" 
                               style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-bottom: 6px;">
                        <button onclick="embedReels()" style="width: 100%; margin-bottom: 8px;">
                            ğŸ“¸ Load Reel
                        </button>
                        <div id="reelsContainer" style="display: none; margin-top: 8px;">
                            <div style="position: relative; padding-bottom: 177.78%; height: 0; overflow: hidden;">
                                <iframe id="reelsPlayer" 
                                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 4px;"
                                        allowfullscreen>
                                </iframe>
                            </div>
                            <button onclick="closeEmbed('instagram')" style="width: 100%; margin-top: 8px; background: #f44336;">
                                âŒ Close
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tenor GIF Panel -->
                    <div id="tenorPanel" class="platform-panel" style="display: none;">
                        <div style="margin-bottom: 8px;">
                            <label style="font-size: 11px; color: #858585;">GIF Category:</label>
                            <select id="gifCategory" style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-top: 4px;">
                                <option value="coding">ğŸ’» Coding</option>
                                <option value="funny">ğŸ˜‚ Funny</option>
                                <option value="cat">ğŸ± Cats</option>
                                <option value="dance">ğŸ’ƒ Dance</option>
                                <option value="excited">ğŸ‰ Excited</option>
                                <option value="confused">ğŸ¤” Confused</option>
                                <option value="tired">ğŸ˜´ Tired</option>
                                <option value="party">ğŸ¥³ Party</option>
                                <option value="crying">ğŸ˜­ Crying</option>
                                <option value="screaming">ğŸ˜± Screaming</option>
                            </select>
                        </div>
                        <button onclick="startGifScroll()" id="startGifBtn" style="width: 100%; margin-bottom: 8px; background: linear-gradient(135deg, #00d2ff 0%, #3a47d5 100%); border: none; color: white; font-weight: bold;">
                            ğŸ­ Start GIF Scroll
                        </button>
                        <button onclick="stopGifScroll()" id="stopGifBtn" style="width: 100%; margin-bottom: 8px; background: #f44336; display: none;">
                            â¸ï¸ Stop Scroll
                        </button>
                        <div style="margin-bottom: 8px;">
                            <label style="font-size: 11px; color: #858585;">Speed: <span id="speedLabel">3s</span></label>
                            <input type="range" id="gifSpeed" min="1" max="10" value="3" 
                                   style="width: 100%; margin-top: 4px;"
                                   oninput="updateSpeedLabel()">
                        </div>
                        <div id="tenorContainer" style="display: none; margin-top: 8px; text-align: center;">
                            <div style="position: relative; width: 100%; padding-bottom: 100%; background: #000; border-radius: 4px; overflow: hidden;">
                                <img id="tenorGif" 
                                     style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 100%; max-height: 100%; object-fit: contain;"
                                     alt="Random GIF">
                            </div>
                            <div id="gifCounter" style="margin-top: 8px; font-size: 11px; color: #858585;">
                                GIF #0
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reddit Panel -->
                    <div id="redditPanel" class="platform-panel" style="display: none;">
                        <input type="text" id="redditUrl" placeholder="Paste Reddit post URL" 
                               style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-bottom: 6px;">
                        <button onclick="embedReddit()" style="width: 100%; margin-bottom: 8px;">
                            ğŸ”´ Load Post
                        </button>
                        <div style="margin-bottom: 8px; font-size: 11px; color: #858585;">
                            Quick subs:
                        </div>
                        <button onclick="loadSubreddit('ProgrammerHumor')" style="width: 100%; margin-bottom: 4px; font-size: 11px;">
                            ğŸ’» r/ProgrammerHumor
                        </button>
                        <button onclick="loadSubreddit('memes')" style="width: 100%; margin-bottom: 4px; font-size: 11px;">
                            ğŸ˜‚ r/memes
                        </button>
                        <button onclick="loadSubreddit('programming')" style="width: 100%; margin-bottom: 8px; font-size: 11px;">
                            ğŸ”§ r/programming
                        </button>
                        <div id="redditContainer" style="display: none; margin-top: 8px;">
                            <iframe id="redditPlayer" 
                                    style="width: 100%; height: 500px; border: none; border-radius: 4px; background: #fff;"
                                    sandbox="allow-scripts allow-same-origin allow-popups">
                            </iframe>
                            <button onclick="closeEmbed('reddit')" style="width: 100%; margin-top: 8px; background: #f44336;">
                                âŒ Close
                            </button>
                        </div>
                    </div>
                    
                    <!-- Twitch Panel -->
                    <div id="twitchPanel" class="platform-panel" style="display: none;">
                        <div style="margin-bottom: 8px;">
                            <label style="font-size: 11px; color: #858585;">Content Type:</label>
                            <select id="twitchType" style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-top: 4px;">
                                <option value="clip">ğŸ¬ Clip</option>
                                <option value="stream">ğŸ“º Live Stream</option>
                            </select>
                        </div>
                        <input type="text" id="twitchUrl" placeholder="Paste Twitch clip/channel URL" 
                               style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-bottom: 6px;">
                        <button onclick="embedTwitch()" style="width: 100%; margin-bottom: 8px;">
                            ğŸ® Load Content
                        </button>
                        <div style="margin-bottom: 8px; font-size: 11px; color: #858585;">
                            Popular streams:
                        </div>
                        <button onclick="loadTwitchChannel('xqc')" style="width: 100%; margin-bottom: 4px; font-size: 11px;">
                            ğŸ® xQc
                        </button>
                        <button onclick="loadTwitchChannel('shroud')" style="width: 100%; margin-bottom: 4px; font-size: 11px;">
                            ğŸ¯ Shroud
                        </button>
                        <button onclick="loadTwitchChannel('pokimane')" style="width: 100%; margin-bottom: 8px; font-size: 11px;">
                            âœ¨ Pokimane
                        </button>
                        <div id="twitchContainer" style="display: none; margin-top: 8px;">
                            <iframe id="twitchPlayer" 
                                    style="width: 100%; height: 400px; border: none; border-radius: 4px;"
                                    allowfullscreen>
                            </iframe>
                            <button onclick="closeEmbed('twitch')" style="width: 100%; margin-top: 8px; background: #f44336;">
                                âŒ Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="editor-area">
                <div class="tabs">
                    <div class="tab active">
                        <span>ğŸ“œ main.js</span>
                        <span class="tab-close">Ã—</span>
                    </div>
                </div>
                
                <div class="editor-wrapper">
                    <div class="line-numbers" id="lineNumbers">1</div>
                    <textarea id="editor" spellcheck="false">// Welcome to SkibidiIDE fr fr no cap ğŸ’€
// This IDE is bussin on god

function sigmaMale() {
    console.log("We're so back");
    return "rizz";
}

// Start grinding that code fr
</textarea>
                    <div class="minimap">
                        <div class="minimap-content" id="minimapContent"></div>
                    </div>
                </div>
                
                <!-- Output Console -->
                <div style="height: 200px; background: #1e1e1e; border-top: 1px solid #3e3e42; display: flex; flex-direction: column;">
                    <div style="background: #2d2d30; padding: 6px 12px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #3e3e42;">
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <span style="font-size: 12px; font-weight: bold; color: #fff;">ğŸ“º Console Output</span>
                            <span id="outputStatus" style="font-size: 11px; color: #858585;">Ready</span>
                        </div>
                        <button onclick="clearConsole()" style="background: transparent; border: none; color: #858585; font-size: 11px; cursor: pointer; text-decoration: underline; padding: 4px 8px;">
                            Clear
                        </button>
                    </div>
                    <div id="consoleOutput" style="flex: 1; overflow-y: auto; padding: 8px; font-family: 'Consolas', 'Monaco', monospace; font-size: 12px; color: #d4d4d4; line-height: 1.6;">
                        <div style="color: #858585;">// Run your code to see output here ğŸš€</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="status-bar">
            <div style="display: flex; gap: 16px;">
                <span class="status-item">ğŸ”¥ Line <span id="currentLine">1</span>, Col <span id="currentCol">1</span></span>
                <span class="status-item">UTF-8</span>
                <span class="status-item">JavaScript</span>
            </div>
            <div style="display: flex; gap: 16px;">
                <span class="status-item" id="brainrotStatus">Brainrot: OFF</span>
                <span class="status-item">Spaces: 4</span>
            </div>
        </div>
    </div>
    
    <div class="brainrot-panel" id="brainrotPanel">
        <div class="brainrot-title">ğŸ’¡ Brainrot AI Assistant</div>
        <div class="brainrot-text" id="brainrotText">
            Yo fam, this code is lowkey mid. You gotta add more rizz to this function fr fr ğŸ’€
        </div>
        <button onclick="closeBrainrot()" style="width: 100%;">Bet ğŸ‘</button>
    </div>
    
    <div class="achievement" id="achievement">
        ğŸ† Achievement Unlocked: First Line of Code (Real)
    </div>

    <div class="autocomplete" id="autocomplete"></div>
    
    <!-- Floating Spotify Player -->
    <div id="floatingSpotify" style="position: fixed; top: 60px; right: 20px; width: 300px; background: rgba(30, 30, 30, 0.98); border: 2px solid #1db954; border-radius: 8px; padding: 12px; display: none; z-index: 3000; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <h3 style="color: #1db954; margin: 0; font-size: 14px;">ğŸµ Spotify Player</h3>
            <button onclick="closeFloatingSpotify()" style="background: transparent; border: none; color: #fff; font-size: 18px; cursor: pointer; padding: 0; width: 24px; height: 24px;">Ã—</button>
        </div>
        <input type="text" id="floatingSpotifyUrl" placeholder="Paste Spotify URL" 
               style="width: 100%; padding: 6px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 3px; font-size: 12px; margin-bottom: 6px;">
        <button onclick="embedFloatingSpotify()" style="width: 100%; margin-bottom: 8px; background: #1db954; border: none; color: white; padding: 8px; border-radius: 4px; font-weight: bold; cursor: pointer;">
            ğŸµ Load Music
        </button>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px; margin-bottom: 8px;">
            <button onclick="loadLofiBeats()" style="width: 100%; font-size: 10px; padding: 6px; background: #3c3c3c; border: 1px solid #555; color: #ccc; border-radius: 3px; cursor: pointer;">
                ğŸ§ Lofi
            </button>
            <button onclick="loadCodingPlaylist()" style="width: 100%; font-size: 10px; padding: 6px; background: #3c3c3c; border: 1px solid #555; color: #ccc; border-radius: 3px; cursor: pointer;">
                ğŸ’» Coding
            </button>
        </div>
        <div id="floatingSpotifyContainer" style="display: none;">
            <iframe id="floatingSpotifyPlayer" 
                    style="width: 100%; height: 352px; border: none; border-radius: 4px;"
                    allow="encrypted-media">
            </iframe>
        </div>
    </div>
    
    <!-- AI Agents Panel -->
    <div id="aiAgentsPanel" style="position: fixed; top: 60px; left: 20px; width: 350px; max-height: 80vh; background: rgba(30, 30, 30, 0.98); border: 2px solid #ff6b6b; border-radius: 8px; padding: 12px; display: none; z-index: 3000; box-shadow: 0 4px 20px rgba(0,0,0,0.5); overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h3 style="color: #ff6b6b; margin: 0; font-size: 16px;">ğŸ¤– AI Coding Agents</h3>
            <button onclick="toggleAIAgents()" style="background: transparent; border: none; color: #fff; font-size: 18px; cursor: pointer; padding: 0; width: 24px; height: 24px;">Ã—</button>
        </div>
        
        <!-- Agent Selection -->
        <div style="margin-bottom: 12px;">
            <label style="font-size: 12px; color: #858585; margin-bottom: 4px; display: block;">Select AI Agent:</label>
            <select id="agentType" style="width: 100%; padding: 8px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 4px; font-size: 13px;">
                <option value="codegen">âœ¨ Code Generator (Real AI) - Writes actual code</option>
                <option value="debugger">ğŸ› Debug Master - Finds bugs</option>
                <option value="optimizer">âš¡ Code Optimizer - Makes it faster</option>
                <option value="explainer">ğŸ“š Code Explainer - Explains code</option>
                <option value="refactor">ğŸ”§ Refactoring Pro - Cleans code</option>
                <option value="tester">âœ… Test Writer - Writes tests</option>
                <option value="commenter">ğŸ’¬ Comment Generator - Adds comments</option>
                <option value="brainrot">ğŸ’€ Brainrot Coder - Sigma advice</option>
            </select>
        </div>
        
        <!-- Task Input -->
        <div style="margin-bottom: 12px;">
            <label style="font-size: 12px; color: #858585; margin-bottom: 4px; display: block;">What do you need help with?</label>
            <textarea id="agentTask" placeholder="e.g., Fix the null pointer bug, Optimize this loop, Explain this function..." 
                      style="width: 100%; height: 60px; padding: 8px; background: #2d2d30; border: 1px solid #3e3e42; color: #d4d4d4; border-radius: 4px; font-size: 12px; resize: vertical; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;"></textarea>
        </div>
        
        <!-- Code Context Toggle -->
        <div style="margin-bottom: 12px;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 12px; color: #ccc;">
                <input type="checkbox" id="includeCode" checked style="cursor: pointer;">
                Include current code in editor
            </label>
        </div>
        
        <!-- Action Buttons -->
        <button onclick="runAIAgent()" style="width: 100%; margin-bottom: 8px; background: linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%); border: none; color: white; padding: 10px; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 14px;">
            ğŸš€ Run Agent
        </button>
        
        <!-- Response Area -->
        <div id="agentResponse" style="display: none; margin-top: 12px; padding: 12px; background: #2d2d30; border: 1px solid #3e3e42; border-radius: 4px; max-height: 300px; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <h4 style="color: #ff6b6b; margin: 0; font-size: 13px;">Agent Response:</h4>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <select id="insertMode" style="background: #3c3c3c; border: 1px solid #555; color: #ccc; font-size: 10px; padding: 4px; border-radius: 3px; cursor: pointer;">
                        <option value="append">ğŸ“ Append</option>
                        <option value="replace">ğŸ”„ Replace</option>
                    </select>
                    <button onclick="insertResponseToEditor()" style="background: #1db954; border: none; color: white; font-size: 10px; cursor: pointer; padding: 4px 8px; border-radius: 3px; font-weight: bold;">
                        Insert
                    </button>
                    <button onclick="clearAgentResponse()" style="background: transparent; border: none; color: #858585; font-size: 11px; cursor: pointer; text-decoration: underline;">Clear</button>
                </div>
            </div>
            <div id="agentResponseText" style="font-size: 12px; line-height: 1.5; color: #d4d4d4; white-space: pre-wrap; font-family: 'Consolas', 'Monaco', monospace;"></div>
        </div>
        
        <!-- Quick Actions -->
        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #3e3e42;">
            <div style="font-size: 11px; color: #858585; margin-bottom: 6px;">Quick Actions:</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px;">
                <button onclick="quickCodeGen()" style="font-size: 10px; padding: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; border-radius: 3px; cursor: pointer; font-weight: bold;">
                    âœ¨ Generate Code
                </button>
                <button onclick="quickDebug()" style="font-size: 10px; padding: 6px; background: #3c3c3c; border: 1px solid #555; color: #ccc; border-radius: 3px; cursor: pointer;">
                    ğŸ› Quick Debug
                </button>
                <button onclick="quickOptimize()" style="font-size: 10px; padding: 6px; background: #3c3c3c; border: 1px solid #555; color: #ccc; border-radius: 3px; cursor: pointer;">
                    âš¡ Optimize
                </button>
                <button onclick="quickExplain()" style="font-size: 10px; padding: 6px; background: #3c3c3c; border: 1px solid #555; color: #ccc; border-radius: 3px; cursor: pointer;">
                    ğŸ“š Explain
                </button>
                <button onclick="quickTest()" style="font-size: 10px; padding: 6px; background: #3c3c3c; border: 1px solid #555; color: #ccc; border-radius: 3px; cursor: pointer;">
                    âœ… Write Tests
                </button>
            </div>
        </div>
    </div>
    
    <script>
        const editor = document.getElementById('editor');
        const lineNumbers = document.getElementById('lineNumbers');
        const brainrotPanel = document.getElementById('brainrotPanel');
        const achievement = document.getElementById('achievement');
        const autocomplete = document.getElementById('autocomplete');
        
        let brainrotMode = false;
        let undoStack = [];
        let redoStack = [];
        let sigmaPoints = 0;
        let achievements = new Set();
        
        const brainrotPhrases = [
            "This code is bussin fr fr ğŸ”¥",
            "Nah fam, you gotta refactor this. It's giving Ohio energy ğŸ’€",
            "Add some error handling, we can't be crashin like that fr",
            "This function name is mid, make it more sigma ğŸ˜¤",
            "Yo this algorithm is lowkey fire though ğŸ”¥",
            "Consider using async/await here, that's the sigma way",
            "You're cookin with this implementation fr ğŸ‘¨â€ğŸ³",
            "This could be more efficient ngl, optimize that loop",
            "Add some comments fam, future you will thank you",
            "That's some clean code right there, no cap ğŸ’¯",
            "Bro really said nested if statements ğŸ’€ switch case exists",
            "This is giving spaghetti code vibes, clean it up",
            "Use const instead of var, we're not in 2010 anymore fr",
            "Destructuring would make this cleaner ngl",
            "This needs better variable names, be more descriptive king",
            "You've been coding for 10 mins straight, maybe watch a short? ğŸ“±",
            "Taking a brain rot break helps you code better fr",
            "Yo load up a short and come back with fresh eyes ğŸ’€",
            "Even sigma coders need TikTok breaks sometimes ğŸ¬",
            "Watch one short then get back to grinding king ğŸ‘‘",
            "Put on some lofi beats, it'll help you focus fr ğŸµ",
            "Your code needs some background music ngl ğŸ§",
            "Spotify playlist might unlock your coding powers ğŸ’ª",
            "Check IG for coding memes then get back to work ğŸ“¸",
            "Quick reel break won't hurt (maybe) ğŸ‘€",
            "GIF break time? The scroll is calling ğŸ­",
            "Random GIFs = random inspiration ngl ğŸ’¡",
            "Scroll some GIFs, clear your mind fr ğŸŒ€",
            "Check r/ProgrammerHumor for the memes ğŸ”´",
            "Reddit got those spicy coding takes rn ğŸ’€",
            "Twitch streams are poppin, watch some gameplay ğŸ®",
            "Take a Twitch break, watch some clips fr ğŸ¬"
        ];
        
        const autocompleteItems = [
            { text: 'function', icon: 'ğ‘“', type: 'keyword' },
            { text: 'const', icon: 'ğ‘', type: 'keyword' },
            { text: 'let', icon: 'ğ‘™', type: 'keyword' },
            { text: 'return', icon: 'â†µ', type: 'keyword' },
            { text: 'console.log', icon: 'âŠ•', type: 'method' },
            { text: 'if', icon: '?', type: 'keyword' },
            { text: 'else', icon: ':', type: 'keyword' },
            { text: 'for', icon: 'â†»', type: 'keyword' },
            { text: 'while', icon: 'âˆ', type: 'keyword' },
            { text: 'sigmaMale()', icon: 'ğŸ’ª', type: 'function' },
            { text: 'rizzFunction()', icon: 'ğŸ˜', type: 'function' },
            { text: 'gyattCalculator()', icon: 'ğŸ§®', type: 'function' }
        ];

        // Update line numbers
        function updateLineNumbers() {
            const lines = editor.value.split('\n').length;
            const lineNumbersDiv = document.getElementById('lineNumbers');
            
            // Create line numbers array
            let lineNumbersText = '';
            for (let i = 1; i <= lines; i++) {
                lineNumbersText += i + '\n';
            }
            
            lineNumbersDiv.textContent = lineNumbersText;
            document.getElementById('lineCount').textContent = lines;
            updateMinimap();
        }
        
        // Update minimap
        function updateMinimap() {
            const minimapContent = document.getElementById('minimapContent');
            minimapContent.textContent = editor.value;
        }
        
        // Update cursor position
        function updateCursorPosition() {
            const text = editor.value.substring(0, editor.selectionStart);
            const lines = text.split('\n');
            const currentLine = lines.length;
            const currentCol = lines[lines.length - 1].length + 1;
            
            document.getElementById('currentLine').textContent = currentLine;
            document.getElementById('currentCol').textContent = currentCol;
        }
        
        // Brainrot mode
        function toggleBrainrot() {
            brainrotMode = !brainrotMode;
            document.getElementById('brainrotStatus').textContent = 
                brainrotMode ? 'Brainrot: ON ğŸ§ ' : 'Brainrot: OFF';
            
            if (brainrotMode) {
                showAchievement("Brainrot Mode Activated ğŸ§ ");
                startBrainrotComments();
            }
        }
        
        function startBrainrotComments() {
            if (!brainrotMode) return;
            
            const phrase = brainrotPhrases[Math.floor(Math.random() * brainrotPhrases.length)];
            document.getElementById('brainrotText').textContent = phrase;
            brainrotPanel.classList.add('show');
            
            setTimeout(() => {
                brainrotPanel.classList.remove('show');
            }, 5000);
            
            setTimeout(startBrainrotComments, Math.random() * 20000 + 15000);
        }
        
        function closeBrainrot() {
            brainrotPanel.classList.remove('show');
        }
        
        // Achievement system
        function showAchievement(text) {
            if (achievements.has(text)) return;
            achievements.add(text);
            
            achievement.textContent = `ğŸ† ${text}`;
            achievement.style.display = 'block';
            
            sigmaPoints += 10;
            document.getElementById('sigmaPoints').textContent = sigmaPoints;
            
            setTimeout(() => {
                achievement.style.display = 'none';
            }, 3000);
        }
        
        // Track typing for achievements
        let totalChars = 0;
        editor.addEventListener('input', () => {
            updateLineNumbers();
            updateCursorPosition();
            saveToUndoStack();
            
            totalChars++;
            
            if (totalChars === 1) {
                showAchievement("First Keystroke (Legendary) ğŸ’¯");
            }
            if (totalChars === 100) {
                showAchievement("100 Characters (Grinding) ğŸ’ª");
            }
            if (editor.value.split('\n').length >= 50) {
                showAchievement("50 Lines of Code (Sigma Developer) ğŸ”¥");
            }
            
            // Update gyatt meter (random fun metric)
            const gyatt = Math.min(100, Math.floor((editor.value.length / 10) % 101));
            document.getElementById('gyattMeter').textContent = gyatt;
            
            // Simple autocomplete
            handleAutocomplete();
        });
        
        function handleAutocomplete() {
            const cursorPos = editor.selectionStart;
            const textBeforeCursor = editor.value.substring(0, cursorPos);
            const words = textBeforeCursor.split(/\s+/);
            const currentWord = words[words.length - 1];
            
            if (currentWord.length < 2) {
                autocomplete.style.display = 'none';
                return;
            }
            
            const matches = autocompleteItems.filter(item => 
                item.text.toLowerCase().startsWith(currentWord.toLowerCase())
            );
            
            if (matches.length === 0) {
                autocomplete.style.display = 'none';
                return;
            }
            
            const rect = editor.getBoundingClientRect();
            const lines = editor.value.substring(0, cursorPos).split('\n');
            const lineHeight = 22.4; // 14px * 1.6 line-height
            
            autocomplete.innerHTML = matches.map((item, index) => `
                <div class="autocomplete-item ${index === 0 ? 'selected' : ''}" onclick="insertAutocomplete('${item.text}')">
                    <span class="autocomplete-icon">${item.icon}</span>
                    <span>${item.text}</span>
                </div>
            `).join('');
            
            autocomplete.style.display = 'block';
            autocomplete.style.left = rect.left + 60 + 'px';
            autocomplete.style.top = rect.top + (lines.length * lineHeight) + 16 + 'px';
        }
        
        function insertAutocomplete(text) {
            const cursorPos = editor.selectionStart;
            const textBefore = editor.value.substring(0, cursorPos);
            const textAfter = editor.value.substring(cursorPos);
            const words = textBefore.split(/\s+/);
            const currentWord = words[words.length - 1];
            const beforeWord = textBefore.substring(0, textBefore.length - currentWord.length);
            
            editor.value = beforeWord + text + textAfter;
            editor.selectionStart = editor.selectionEnd = beforeWord.length + text.length;
            autocomplete.style.display = 'none';
            editor.focus();
        }
        
        editor.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                e.preventDefault();
                const start = editor.selectionStart;
                const end = editor.selectionEnd;
                editor.value = editor.value.substring(0, start) + '    ' + editor.value.substring(end);
                editor.selectionStart = editor.selectionEnd = start + 4;
            }
        });
        
        editor.addEventListener('click', updateCursorPosition);
        editor.addEventListener('keyup', updateCursorPosition);
        
        // Undo/Redo
        function saveToUndoStack() {
            if (undoStack.length === 0 || undoStack[undoStack.length - 1] !== editor.value) {
                undoStack.push(editor.value);
                if (undoStack.length > 50) undoStack.shift();
                redoStack = [];
            }
        }
        
        function undo() {
            if (undoStack.length > 1) {
                redoStack.push(undoStack.pop());
                editor.value = undoStack[undoStack.length - 1];
                updateLineNumbers();
            }
        }
        
        function redo() {
            if (redoStack.length > 0) {
                const state = redoStack.pop();
                undoStack.push(state);
                editor.value = state;
                updateLineNumbers();
            }
        }
        
        // File operations
        function newFile() {
            if (confirm('Create new file? (Current changes will be saved to memory)')) {
                editor.value = '// New file\n';
                updateLineNumbers();
                showAchievement("New File Created ğŸ“„");
            }
        }
        
        function saveFile() {
            const blob = new Blob([editor.value], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'code.js';
            a.click();
            showAchievement("File Saved (Real) ğŸ’¾");
        }
        
        function openFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.js,.html,.css,.txt,.md';
            input.onchange = (e) => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = (event) => {
                    editor.value = event.target.result;
                    updateLineNumbers();
                    showAchievement("File Opened ğŸ“");
                };
                reader.readAsText(file);
            };
            input.click();
        }
        
        function runCode() {
            const consoleOutput = document.getElementById('consoleOutput');
            const outputStatus = document.getElementById('outputStatus');
            
            // Clear previous output
            consoleOutput.innerHTML = '';
            outputStatus.textContent = 'Running...';
            outputStatus.style.color = '#ffd93d';
            
            // Capture console.log output
            const logs = [];
            const originalLog = console.log;
            const originalError = console.error;
            const originalWarn = console.warn;
            
            console.log = function(...args) {
                logs.push({ type: 'log', message: args.join(' ') });
                originalLog.apply(console, args);
            };
            
            console.error = function(...args) {
                logs.push({ type: 'error', message: args.join(' ') });
                originalError.apply(console, args);
            };
            
            console.warn = function(...args) {
                logs.push({ type: 'warn', message: args.join(' ') });
                originalWarn.apply(console, args);
            };
            
            try {
                // Execute the code
                const result = new Function(editor.value)();
                
                // Show logs
                if (logs.length > 0) {
                    logs.forEach(log => {
                        const logDiv = document.createElement('div');
                        logDiv.style.marginBottom = '4px';
                        
                        if (log.type === 'error') {
                            logDiv.style.color = '#f44336';
                            logDiv.textContent = 'âŒ ' + log.message;
                        } else if (log.type === 'warn') {
                            logDiv.style.color = '#ffd93d';
                            logDiv.textContent = 'âš ï¸ ' + log.message;
                        } else {
                            logDiv.style.color = '#4caf50';
                            logDiv.textContent = 'âœ… ' + log.message;
                        }
                        
                        consoleOutput.appendChild(logDiv);
                    });
                } else {
                    // If no logs but code ran successfully
                    const successDiv = document.createElement('div');
                    successDiv.style.color = '#4caf50';
                    successDiv.textContent = 'âœ… Code executed successfully (no output)';
                    consoleOutput.appendChild(successDiv);
                }
                
                // Show return value if exists
                if (result !== undefined) {
                    const returnDiv = document.createElement('div');
                    returnDiv.style.color = '#64b5f6';
                    returnDiv.style.marginTop = '8px';
                    returnDiv.textContent = 'â†©ï¸ Returned: ' + JSON.stringify(result);
                    consoleOutput.appendChild(returnDiv);
                }
                
                outputStatus.textContent = 'Success âœ…';
                outputStatus.style.color = '#4caf50';
                showAchievement("Code Executed (No Cap) â–¶ï¸");
                
            } catch (error) {
                const errorDiv = document.createElement('div');
                errorDiv.style.color = '#f44336';
                errorDiv.style.whiteSpace = 'pre-wrap';
                errorDiv.textContent = 'ğŸ’€ Error: ' + error.message + '\n\n' + error.stack;
                consoleOutput.appendChild(errorDiv);
                
                outputStatus.textContent = 'Error ğŸ’€';
                outputStatus.style.color = '#f44336';
            } finally {
                // Restore original console methods
                console.log = originalLog;
                console.error = originalError;
                console.warn = originalWarn;
            }
        }
        
        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = '<div style="color: #858585;">// Console cleared ğŸ§¹</div>';
            document.getElementById('outputStatus').textContent = 'Ready';
            document.getElementById('outputStatus').style.color = '#858585';
        }
        
        function formatCode() {
            // Simple indentation
            let formatted = editor.value;
            let indent = 0;
            const lines = formatted.split('\n');
            
            formatted = lines.map(line => {
                const trimmed = line.trim();
                if (trimmed.includes('}')) indent = Math.max(0, indent - 1);
                const indented = '    '.repeat(indent) + trimmed;
                if (trimmed.includes('{')) indent++;
                return indented;
            }).join('\n');
            
            editor.value = formatted;
            updateLineNumbers();
            showAchievement("Code Formatted âœ¨");
        }
        
        function find() {
            const search = prompt('Enter text to find:');
            if (search) {
                const index = editor.value.indexOf(search);
                if (index !== -1) {
                    editor.focus();
                    editor.setSelectionRange(index, index + search.length);
                } else {
                    alert('Text not found fr ğŸ”');
                }
            }
        }
        
        function switchFile(filename) {
            document.querySelectorAll('.file-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        // Platform switching
        function switchPlatform(platform) {
            // Update tab styles
            document.querySelectorAll('.platform-tab').forEach(tab => {
                if (tab.dataset.platform === platform) {
                    tab.style.background = '#094771';
                    tab.style.borderColor = '#0e639c';
                    tab.classList.add('active');
                } else {
                    tab.style.background = '#3c3c3c';
                    tab.style.borderColor = '#555';
                    tab.classList.remove('active');
                }
            });
            
            // Show/hide panels
            document.getElementById('youtubePanel').style.display = platform === 'youtube' ? 'block' : 'none';
            document.getElementById('instagramPanel').style.display = platform === 'instagram' ? 'block' : 'none';
            document.getElementById('tenorPanel').style.display = platform === 'tenor' ? 'block' : 'none';
            document.getElementById('redditPanel').style.display = platform === 'reddit' ? 'block' : 'none';
            document.getElementById('twitchPanel').style.display = platform === 'twitch' ? 'block' : 'none';
        }
        
        // YouTube Shorts embedding
        function embedShorts() {
            const urlInput = document.getElementById('shortsUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Paste a YouTube Shorts URL first fr ğŸ“±');
                return;
            }
            
            // Extract video ID from various YouTube URL formats
            let videoId = null;
            
            // shorts/VIDEO_ID format
            const shortsMatch = url.match(/shorts\/([a-zA-Z0-9_-]+)/);
            if (shortsMatch) {
                videoId = shortsMatch[1];
            }
            
            // youtube.com/watch?v=VIDEO_ID format
            const watchMatch = url.match(/[?&]v=([a-zA-Z0-9_-]+)/);
            if (watchMatch) {
                videoId = watchMatch[1];
            }
            
            // youtu.be/VIDEO_ID format
            const shortUrlMatch = url.match(/youtu\.be\/([a-zA-Z0-9_-]+)/);
            if (shortUrlMatch) {
                videoId = shortUrlMatch[1];
            }
            
            if (!videoId) {
                alert('Invalid YouTube URL fr ğŸ’€ Try again');
                return;
            }
            
            // Embed the video
            const player = document.getElementById('shortsPlayer');
            player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&loop=1&playlist=${videoId}`;
            
            document.getElementById('shortsContainer').style.display = 'block';
            showAchievement("Brain Rot Break Activated ğŸ“±");
            
            // Track distraction time for achievements
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        // Quick shorts suggestions - mix of memes and coding content
        const quickShorts = [
            'dQw4w9WgXcQ', // Classic rickroll
            'jNQXAC9IVRw', // Me at the zoo (first YT video)
            '9bZkp7q19f0', // Gangnam Style (iconic)
            'kJQP7kiw5Fk', // Luis Fonsi - Despacito
            'OPf0YbXqDm0', // Mark Rober
            // Add your favorite shorts IDs here!
        ];
        
        function loadRandomShort() {
            const randomId = quickShorts[Math.floor(Math.random() * quickShorts.length)];
            document.getElementById('shortsUrl').value = `https://youtube.com/shorts/${randomId}`;
            embedShorts();
        }
        
        // Spotify floating player
        function embedFloatingSpotify() {
            const urlInput = document.getElementById('floatingSpotifyUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Paste a Spotify URL first fr ğŸµ');
                return;
            }
            
            // Extract Spotify URI from various URL formats
            // Format: open.spotify.com/track/ID or open.spotify.com/playlist/ID
            let spotifyMatch = url.match(/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/);
            
            if (!spotifyMatch) {
                alert('Invalid Spotify URL fr ğŸ’€ Try again');
                return;
            }
            
            const type = spotifyMatch[1];
            const id = spotifyMatch[2];
            
            // Spotify embed URL
            const player = document.getElementById('floatingSpotifyPlayer');
            player.src = `https://open.spotify.com/embed/${type}/${id}?utm_source=generator&theme=0`;
            
            document.getElementById('floatingSpotifyContainer').style.display = 'block';
            showAchievement("Coding Vibes Activated ğŸµ");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        // Quick Spotify playlists
        function loadLofiBeats() {
            // Show floating player first
            document.getElementById('floatingSpotify').style.display = 'block';
            
            // Popular lofi hip hop playlist
            const player = document.getElementById('floatingSpotifyPlayer');
            player.src = 'https://open.spotify.com/embed/playlist/37i9dQZF1DWWQRwui0ExPn?utm_source=generator&theme=0';
            
            document.getElementById('floatingSpotifyContainer').style.display = 'block';
            showAchievement("Lofi Vibes Activated ğŸ§");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        function loadCodingPlaylist() {
            // Show floating player first
            document.getElementById('floatingSpotify').style.display = 'block';
            
            // Coding/Focus playlist
            const player = document.getElementById('floatingSpotifyPlayer');
            player.src = 'https://open.spotify.com/embed/playlist/37i9dQZF1DX5trt9i14X7j?utm_source=generator&theme=0';
            
            document.getElementById('floatingSpotifyContainer').style.display = 'block';
            showAchievement("Coding Playlist Activated ğŸ’»");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        function toggleFloatingSpotify() {
            const player = document.getElementById('floatingSpotify');
            if (player.style.display === 'none' || player.style.display === '') {
                player.style.display = 'block';
            } else {
                player.style.display = 'none';
            }
        }
        
        function closeFloatingSpotify() {
            document.getElementById('floatingSpotify').style.display = 'none';
        }
        
        // AI Agents System
        function toggleAIAgents() {
            const panel = document.getElementById('aiAgentsPanel');
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                showAchievement("AI Agents Activated ğŸ¤–");
            } else {
                panel.style.display = 'none';
            }
        }
        
        async function runAIAgent() {
            const agentType = document.getElementById('agentType').value;
            const task = document.getElementById('agentTask').value.trim();
            const includeCode = document.getElementById('includeCode').checked;
            const currentCode = editor.value;
            
            if (!task && agentType !== 'brainrot') {
                alert('Please describe what you need help with fr ğŸ¤–');
                return;
            }
            
            // Show loading
            const responseDiv = document.getElementById('agentResponse');
            const responseText = document.getElementById('agentResponseText');
            responseDiv.style.display = 'block';
            responseText.textContent = 'ğŸ¤– Agent is thinking...';
            
            // If Code Generator, use real AI API
            if (agentType === 'codegen') {
                try {
                    const response = await callClaudeAPI(task, includeCode ? currentCode : null);
                    responseText.textContent = response;
                    showAchievement('Code Generator Completed âœ¨');
                } catch (error) {
                    responseText.textContent = `Error: ${error.message}\n\nMake sure you're viewing this from the Claude.ai interface to use real AI code generation.`;
                }
            } else {
                // Simulate AI response for other agents
                setTimeout(() => {
                    let response = generateAgentResponse(agentType, task, includeCode ? currentCode : null);
                    responseText.textContent = response;
                    showAchievement(`${getAgentName(agentType)} Completed ğŸ¤–`);
                }, 1500);
            }
        }
        
        async function callClaudeAPI(task, currentCode) {
            // Build the prompt based on context
            let prompt = `You are a helpful coding assistant. ${task}`;
            
            if (currentCode) {
                prompt += `\n\nHere is the current code in the editor:\n\`\`\`\n${currentCode}\n\`\`\``;
            }
            
            prompt += '\n\nProvide clear, working code with brief explanations. Keep it concise and practical.';
            
            // Call the Anthropic API
            const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    model: "claude-sonnet-4-20250514",
                    max_tokens: 2000,
                    messages: [
                        { role: "user", content: prompt }
                    ],
                }),
            });
            
            if (!response.ok) {
                throw new Error(`API request failed: ${response.status} ${response.statusText}`);
            }
            
            const data = await response.json();
            
            // Extract text response
            const fullResponse = data.content
                .map(item => (item.type === "text" ? item.text : ""))
                .filter(Boolean)
                .join("\n");
            
            return fullResponse || "No response generated.";
        }
        
        function generateAgentResponse(agentType, task, code) {
            const responses = {
                debugger: `ğŸ› Debug Analysis:

Found potential issues:
1. Missing null checks on line references
2. Async operations without proper error handling
3. Potential memory leak in event listeners

Recommendations:
- Add try-catch blocks around risky operations
- Validate input parameters
- Clean up event listeners on component unmount

Pro tip: Use console.log() strategically to trace execution flow fr ğŸ’¯`,
                
                optimizer: `âš¡ Optimization Report:

Performance improvements identified:
1. Replace nested loops with more efficient algorithms
2. Cache computed values instead of recalculating
3. Use const/let instead of var for better scope

Estimated improvement: 40% faster execution
Memory reduction: ~25%

Code looks mid rn, but we can make it bussin ğŸ”¥`,
                
                explainer: `ğŸ“š Code Explanation:

This code implements a ${task || 'function'}.

Key concepts:
- Variables store data values
- Functions encapsulate reusable logic
- Loops iterate over collections
- Conditionals control program flow

Think of it like a recipe - each step does something specific to get the final result.

Not gonna lie, this is some clean logic fr ğŸ‘¨â€ğŸ³`,
                
                refactor: `ğŸ”§ Refactoring Suggestions:

Improvements:
1. Extract repeated logic into helper functions
2. Rename variables for better clarity
3. Apply DRY principle (Don't Repeat Yourself)
4. Simplify complex conditionals

Before: Spaghetti code ğŸ
After: Clean, maintainable architecture ğŸ—ï¸

This refactor gonna be bussin no cap ğŸ’¯`,
                
                tester: `âœ… Test Cases Generated:

// Test 1: Normal case
test('should handle valid input', () => {
    expect(myFunction('valid')).toBe(expected);
});

// Test 2: Edge case
test('should handle empty input', () => {
    expect(myFunction('')).toBe(null);
});

// Test 3: Error case
test('should throw on invalid input', () => {
    expect(() => myFunction(null)).toThrow();
});

Coverage: Looking solid fr ğŸ¯`,
                
                commenter: `ğŸ’¬ Comments Added:

/**
 * ${task || 'Main function'}
 * @param {string} input - The input parameter
 * @returns {any} The processed result
 */

// Initialize variables
// Process the data
// Return result

Comments make code readable for future you ğŸ“`,
                
                brainrot: `ğŸ’€ Brainrot Coder Says:

Yo fam, ${task || 'this code'} is giving major Ohio energy fr fr ğŸ’€

Real talk:
- Your function names are mid, make them more sigma
- This algorithm is bussin but could be more rizz
- Add some error handling, we can't be crashin like that
- Use async/await, that's the sigma grindset way

No cap, refactor this and you'll be cookin ğŸ”¥
Stay on that coding grind king ğŸ‘‘

We're so back fr fr ğŸ’¯`
            };
            
            return responses[agentType] || "Agent is processing your request...";
        }
        
        function getAgentName(agentType) {
            const names = {
                codegen: 'Code Generator',
                debugger: 'Debug Master',
                optimizer: 'Code Optimizer',
                explainer: 'Code Explainer',
                refactor: 'Refactoring Pro',
                tester: 'Test Writer',
                commenter: 'Comment Generator',
                brainrot: 'Brainrot Coder'
            };
            return names[agentType] || 'AI Agent';
        }
        
        function clearAgentResponse() {
            document.getElementById('agentResponse').style.display = 'none';
            document.getElementById('agentResponseText').textContent = '';
        }
        
        function insertResponseToEditor() {
            const responseText = document.getElementById('agentResponseText').textContent;
            const insertMode = document.getElementById('insertMode').value;
            
            // Extract code blocks from response (anything between ``` markers)
            const codeBlockRegex = /```[\w]*\n([\s\S]*?)```/g;
            let matches = [...responseText.matchAll(codeBlockRegex)];
            
            let codeToInsert;
            if (matches.length > 0) {
                // If there are code blocks, use the first one
                codeToInsert = matches[0][1].trim();
            } else {
                // If no code blocks, use entire response
                codeToInsert = responseText;
            }
            
            if (insertMode === 'append') {
                // Append to existing code
                const currentCode = editor.value;
                if (currentCode.trim()) {
                    editor.value = currentCode + '\n\n// AI Generated Code:\n' + codeToInsert;
                } else {
                    editor.value = codeToInsert;
                }
                showAchievement('Code Appended to Editor ğŸ“');
            } else {
                // Replace all code
                editor.value = codeToInsert;
                showAchievement('Code Replaced in Editor ğŸ”„');
            }
            
            updateLineNumbers();
            editor.focus();
            
            // Scroll to bottom if appending
            if (insertMode === 'append') {
                editor.scrollTop = editor.scrollHeight;
            }
        }
        
        // Quick action functions
        function quickCodeGen() {
            document.getElementById('agentType').value = 'codegen';
            document.getElementById('agentTask').value = 'Write code based on the description I provide';
            // Don't auto-run, let user describe what they want
            document.getElementById('agentTask').focus();
        }
        
        function quickDebug() {
            document.getElementById('agentType').value = 'debugger';
            document.getElementById('agentTask').value = 'Find and fix bugs in my code';
            runAIAgent();
        }
        
        function quickOptimize() {
            document.getElementById('agentType').value = 'optimizer';
            document.getElementById('agentTask').value = 'Optimize performance and reduce complexity';
            runAIAgent();
        }
        
        function quickExplain() {
            document.getElementById('agentType').value = 'explainer';
            document.getElementById('agentTask').value = 'Explain what this code does';
            runAIAgent();
        }
        
        function quickTest() {
            document.getElementById('agentType').value = 'tester';
            document.getElementById('agentTask').value = 'Write unit tests for this code';
            runAIAgent();
        }
        
        // Instagram Reels embedding
        function embedReels() {
            const urlInput = document.getElementById('reelsUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Paste an Instagram Reel URL first fr ğŸ“¸');
                return;
            }
            
            // Extract reel ID from Instagram URL
            // Format: instagram.com/reel/ID or instagram.com/p/ID
            let reelMatch = url.match(/(?:reel|p)\/([a-zA-Z0-9_-]+)/);
            
            if (!reelMatch) {
                alert('Invalid Instagram URL fr ğŸ’€ Try again');
                return;
            }
            
            const reelId = reelMatch[1];
            
            // Instagram embed URL
            const player = document.getElementById('reelsPlayer');
            player.src = `https://www.instagram.com/p/${reelId}/embed/`;
            
            document.getElementById('reelsContainer').style.display = 'block';
            showAchievement("Instagram Scrolling Activated ğŸ“¸");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        // Tenor GIF Scroller
        let gifInterval = null;
        let gifCount = 0;
        
        // Using reliable, publicly accessible GIF URLs
        const gifCollections = {
            coding: [
                'https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXE3ZjBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdQ/ZVik7pBtu9dNS/giphy.gif',
                'https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXE3ZjBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdQ/3oKIPnAiaMCws8nOsE/giphy.gif',
                'https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXE3ZjBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdTBkdQ/du3J3cXyzhj75IOgvA/giphy.gif',
                'https://media.giphy.com/media/13HgwGsXF0aiGY/giphy.gif',
                'https://media.giphy.com/media/LmNwrBhejkK9EFP504/giphy.gif',
                'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif'
            ],
            funny: [
                'https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif',
                'https://media.giphy.com/media/l0HlvtIPzPdt2usKs/giphy.gif',
                'https://media.giphy.com/media/10JhviFuU2gWD6/giphy.gif',
                'https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif',
                'https://media.giphy.com/media/Q7ozWVYCR0nyW2rvPW/giphy.gif',
                'https://media.giphy.com/media/l46Cy1rHbQ92uuLXa/giphy.gif'
            ],
            cat: [
                'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif',
                'https://media.giphy.com/media/VbnUQpnihPSIgIXuZv/giphy.gif',
                'https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif',
                'https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif',
                'https://media.giphy.com/media/ICOgUNjpvO0PC/giphy.gif',
                'https://media.giphy.com/media/jpbnoe3UIa8TU8LM13/giphy.gif'
            ],
            dance: [
                'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',
                'https://media.giphy.com/media/l3q2XhfQ8oCkm1Ts4/giphy.gif',
                'https://media.giphy.com/media/xTiTnqUxyWbsAXq7Ju/giphy.gif',
                'https://media.giphy.com/media/13Y6LAZJqRspI4/giphy.gif',
                'https://media.giphy.com/media/6WJroWFPN2LyE/giphy.gif',
                'https://media.giphy.com/media/l41m4ODfe8PwHlsUU/giphy.gif'
            ],
            excited: [
                'https://media.giphy.com/media/5GoVLqeAOo6PK/giphy.gif',
                'https://media.giphy.com/media/kyLYXonQYYfwYDIeZl/giphy.gif',
                'https://media.giphy.com/media/yoJC2El7xJkYCadlWE/giphy.gif',
                'https://media.giphy.com/media/artj92V8o75VPL7AeQ/giphy.gif',
                'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',
                'https://media.giphy.com/media/3o6Zt6ML6BklcajjsA/giphy.gif'
            ],
            confused: [
                'https://media.giphy.com/media/3o7btPCcdNniyf0ArS/giphy.gif',
                'https://media.giphy.com/media/3WmWdBzqveXaE/giphy.gif',
                'https://media.giphy.com/media/l3q2K5jinAlChoCLS/giphy.gif',
                'https://media.giphy.com/media/CDJo4EgHwbaPS/giphy.gif',
                'https://media.giphy.com/media/kaq6GnxDlJaBq/giphy.gif',
                'https://media.giphy.com/media/3o7527pa7qs9kCG78A/giphy.gif'
            ],
            tired: [
                'https://media.giphy.com/media/l0HlBO7eyXzSZkJri/giphy.gif',
                'https://media.giphy.com/media/W1xb8a7RNWv2E/giphy.gif',
                'https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif',
                'https://media.giphy.com/media/hFdi31x0aTdMIydxuO/giphy.gif',
                'https://media.giphy.com/media/9Y5BbDSkSTiY8/giphy.gif',
                'https://media.giphy.com/media/xT0xeuOy2Fcl9vDGiA/giphy.gif'
            ],
            party: [
                'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',
                'https://media.giphy.com/media/DhstvI3zZ598Nb1rFf/giphy.gif',
                'https://media.giphy.com/media/l0MYGb1LuZ3n7dRnO/giphy.gif',
                'https://media.giphy.com/media/3ohzdIuqJoo8QdKlnW/giphy.gif',
                'https://media.giphy.com/media/g9582DNuQppxC/giphy.gif',
                'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif'
            ],
            crying: [
                'https://media.giphy.com/media/L95W4wv8nnb9K/giphy.gif',
                'https://media.giphy.com/media/d2lcHJTG5Tscg/giphy.gif',
                'https://media.giphy.com/media/OPU6wzx8JrHna/giphy.gif',
                'https://media.giphy.com/media/ROF8OQvDmxytW/giphy.gif',
                'https://media.giphy.com/media/3o7absbD7PbTFQa0c8/giphy.gif',
                'https://media.giphy.com/media/1BXa2alBjrCXC/giphy.gif'
            ],
            screaming: [
                'https://media.giphy.com/media/l0HlPystfePnAI3G8/giphy.gif',
                'https://media.giphy.com/media/5nsiFjdgylfK3csZ5T/giphy.gif',
                'https://media.giphy.com/media/l0IylQoMkcbZSOAzm/giphy.gif',
                'https://media.giphy.com/media/14ut8PhnIwzros/giphy.gif',
                'https://media.giphy.com/media/bEVKYB487Lqxy/giphy.gif',
                'https://media.giphy.com/media/HUkOv6BNWc1HO/giphy.gif'
            ]
        };
        
        function updateSpeedLabel() {
            const speed = document.getElementById('gifSpeed').value;
            document.getElementById('speedLabel').textContent = speed + 's';
        }
        
        function getRandomGif() {
            const category = document.getElementById('gifCategory').value;
            const gifs = gifCollections[category];
            return gifs[Math.floor(Math.random() * gifs.length)];
        }
        
        function updateGif() {
            const gifImg = document.getElementById('tenorGif');
            const randomGif = getRandomGif();
            
            console.log('Loading GIF:', randomGif);
            
            // Add fade effect
            gifImg.style.opacity = '0';
            
            setTimeout(() => {
                // Force reload by adding timestamp
                gifImg.src = randomGif + '?t=' + Date.now();
                
                gifImg.onload = function() {
                    console.log('GIF loaded successfully');
                    gifImg.style.opacity = '1';
                    gifCount++;
                    document.getElementById('gifCounter').textContent = `GIF #${gifCount} ğŸ’€`;
                };
                
                gifImg.onerror = function() {
                    console.error('GIF failed to load:', randomGif);
                    // Show error but keep trying
                    gifImg.style.opacity = '1';
                    gifCount++;
                    document.getElementById('gifCounter').textContent = `GIF #${gifCount} (error) ğŸ’€`;
                };
            }, 200);
        }
        
        function startGifScroll() {
            if (gifInterval) return; // Already running
            
            const speed = parseInt(document.getElementById('gifSpeed').value) * 1000;
            
            // Show container and load first GIF
            document.getElementById('tenorContainer').style.display = 'block';
            document.getElementById('startGifBtn').style.display = 'none';
            document.getElementById('stopGifBtn').style.display = 'block';
            
            gifCount = 0;
            updateGif();
            
            // Start interval
            gifInterval = setInterval(updateGif, speed);
            
            showAchievement("GIF Scroll Activated ğŸ­");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        function stopGifScroll() {
            if (gifInterval) {
                clearInterval(gifInterval);
                gifInterval = null;
            }
            
            document.getElementById('startGifBtn').style.display = 'block';
            document.getElementById('stopGifBtn').style.display = 'none';
            
            // Calculate time wasted
            if (window.embedStartTime) {
                const timeWasted = Math.floor((Date.now() - window.embedStartTime) / 1000);
                if (timeWasted > 30) {
                    showAchievement(`Watched ${gifCount} GIFs in ${timeWasted}s ğŸ’€`);
                }
                window.embedStartTime = null;
            }
        }
        
        // Initialize GIF image with transition
        setTimeout(() => {
            const gifImg = document.getElementById('tenorGif');
            if (gifImg) {
                gifImg.style.transition = 'opacity 0.2s ease';
            }
        }, 100);
        
        // Reddit embedding
        function embedReddit() {
            const urlInput = document.getElementById('redditUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('Paste a Reddit URL first fr ğŸ”´');
                return;
            }
            
            // Extract post info from Reddit URL
            // Format: reddit.com/r/subreddit/comments/id/title
            const redditMatch = url.match(/reddit\.com\/r\/([^\/]+)\/comments\/([^\/]+)/);
            
            if (!redditMatch) {
                alert('Invalid Reddit URL fr ğŸ’€ Try again');
                return;
            }
            
            // Use Reddit's embed format
            const embedUrl = url.replace('www.reddit.com', 'embed.reddit.com');
            
            const player = document.getElementById('redditPlayer');
            player.src = embedUrl;
            
            document.getElementById('redditContainer').style.display = 'block';
            showAchievement("Reddit Scrolling Activated ğŸ”´");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        function loadSubreddit(subreddit) {
            // Open subreddit in the iframe
            const player = document.getElementById('redditPlayer');
            player.src = `https://www.reddit.com/r/${subreddit}/`;
            
            document.getElementById('redditContainer').style.display = 'block';
            showAchievement(`r/${subreddit} Loaded ğŸ”´`);
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        // Twitch embedding
        function embedTwitch() {
            const urlInput = document.getElementById('twitchUrl');
            const url = urlInput.value.trim();
            const type = document.getElementById('twitchType').value;
            
            if (!url) {
                alert('Paste a Twitch URL first fr ğŸ®');
                return;
            }
            
            const player = document.getElementById('twitchPlayer');
            
            if (type === 'clip') {
                // Extract clip slug from URL
                // Format: clips.twitch.tv/ClipSlug or twitch.tv/channel/clip/ClipSlug
                let clipMatch = url.match(/clips\.twitch\.tv\/([a-zA-Z0-9_-]+)/);
                if (!clipMatch) {
                    clipMatch = url.match(/twitch\.tv\/[^\/]+\/clip\/([a-zA-Z0-9_-]+)/);
                }
                
                if (!clipMatch) {
                    alert('Invalid Twitch clip URL fr ğŸ’€');
                    return;
                }
                
                const clipSlug = clipMatch[1];
                player.src = `https://clips.twitch.tv/embed?clip=${clipSlug}&parent=${window.location.hostname || 'localhost'}`;
            } else {
                // Extract channel name from URL
                // Format: twitch.tv/channelname
                const channelMatch = url.match(/twitch\.tv\/([a-zA-Z0-9_]+)/);
                
                if (!channelMatch) {
                    alert('Invalid Twitch channel URL fr ğŸ’€');
                    return;
                }
                
                const channel = channelMatch[1];
                player.src = `https://player.twitch.tv/?channel=${channel}&parent=${window.location.hostname || 'localhost'}`;
            }
            
            document.getElementById('twitchContainer').style.display = 'block';
            showAchievement("Twitch Grind Activated ğŸ®");
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        function loadTwitchChannel(channel) {
            const player = document.getElementById('twitchPlayer');
            player.src = `https://player.twitch.tv/?channel=${channel}&parent=${window.location.hostname || 'localhost'}`;
            
            document.getElementById('twitchContainer').style.display = 'block';
            document.getElementById('twitchType').value = 'stream';
            showAchievement(`${channel} Stream Loaded ğŸ®`);
            
            if (!window.embedStartTime) {
                window.embedStartTime = Date.now();
            }
        }
        
        // Universal close function
        function closeEmbed(platform) {
            if (platform === 'youtube') {
                const player = document.getElementById('shortsPlayer');
                player.src = '';
                document.getElementById('shortsContainer').style.display = 'none';
            } else if (platform === 'instagram') {
                const player = document.getElementById('reelsPlayer');
                player.src = '';
                document.getElementById('reelsContainer').style.display = 'none';
            } else if (platform === 'spotify') {
                const player = document.getElementById('spotifyPlayer');
                player.src = '';
                document.getElementById('spotifyContainer').style.display = 'none';
            } else if (platform === 'tenor') {
                stopGifScroll();
                document.getElementById('tenorContainer').style.display = 'none';
            } else if (platform === 'reddit') {
                const player = document.getElementById('redditPlayer');
                player.src = '';
                document.getElementById('redditContainer').style.display = 'none';
            } else if (platform === 'twitch') {
                const player = document.getElementById('twitchPlayer');
                player.src = '';
                document.getElementById('twitchContainer').style.display = 'none';
            }
            
            // Calculate time wasted (I mean, invested)
            if (window.embedStartTime) {
                const timeWasted = Math.floor((Date.now() - window.embedStartTime) / 1000);
                if (timeWasted > 60) {
                    showAchievement(`Wasted ${timeWasted}s on Brain Rot ğŸ’€`);
                }
                window.embedStartTime = null;
            }
        }
        
        // Initialize
        updateLineNumbers();
        updateCursorPosition();
        saveToUndoStack();
        
        // Click outside to close autocomplete
        document.addEventListener('click', (e) => {
            if (!autocomplete.contains(e.target) && e.target !== editor) {
                autocomplete.style.display = 'none';
            }
        });
    </script>
</body>
</html>
